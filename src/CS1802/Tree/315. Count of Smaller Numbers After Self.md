## 315. Count of Smaller Numbers After Self

BST

```java

class Solution {
    class Node {
        int leftNodeCount; //left tree node count
        int val;
        int duplicated = 1;
        Node left, right;
        
        Node (int val, int leftNodeCount) {
            this.val = val;
            this.leftNodeCount = leftNodeCount;
        }
    }
    public List<Integer> countSmaller(int[] nums) {
        int len = nums.length;
        Integer[] count = new Integer[len];
        Node root = null;
        
        for (int i = len - 1; i >= 0; i--) {
            root = buildBST(root, 0, i, nums, count);                        
        }
        
        return Arrays.asList(count);
    }
    
    private Node buildBST(Node root, int smallerCount, int index, int[] nums, Integer[] count) {
        if (root == null) {
            count[index] = smallerCount;
            return new Node(nums[index], 0);
        }
        
        int val = nums[index];
        if (val < root.val) {
            root.leftNodeCount++;
            root.left = buildBST(root.left, smallerCount, index, nums, count);
        } else if (val > root.val) {
            root.right = buildBST(root.right, smallerCount + root.duplicated + root.leftNodeCount, index, nums, count);
        } else {
            root.duplicated++;
            count[index] = root.leftNodeCount + smallerCount;
        }
        
        return root;                
    }
}

```
